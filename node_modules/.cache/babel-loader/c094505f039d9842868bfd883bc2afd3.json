{"ast":null,"code":"import { connect } from 'react-redux';\nimport { deletePost, createPost, showForm, showUpdateForm, updatePost, showPostDetail, setPostsFilter } from '../../actions';\nimport Button from '../../components/Buttons/Button';\nimport { put, takeEvery } from 'redux-saga/effects';\nimport { FormDataText } from '../Form'; //import action from '../../index'\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    classes: ownProps.classes,\n    result: getButtonText(state, ownProps)\n  };\n}\n/**\n * Set text for \"show/hide form\" button\n * ( if this button have prop 'showElement')\n *\n * @param state\n * @param ownProps\n * @returns {string|*}\n */\n\n\nfunction getButtonText(state, ownProps) {\n  console.log(ownProps);\n  console.log(state);\n\n  if (!ownProps.showElement) {\n    return ownProps.buttonText;\n  }\n\n  let formState = state.form.filter(v => v.showElement === ownProps.showElement).pop();\n\n  if (!formState) {\n    return ownProps.buttonText;\n  }\n\n  return formState.enabled ? FormDataText.hideForm : ownProps.buttonText;\n}\n\nfunction* hide() {\n  yield put(showForm('form-element-1'));\n}\n\nexport function* doubleAction() {\n  yield takeEvery('CREATE_POST', hide);\n  yield takeEvery('UPDATE_POST', hide);\n}\n/**\n *\n * mapDispatchToProps\n * adds event to our prop. We can use it from Button component as well.\n *\n * @param dispatch\n * @param ownProps\n * @returns {{onClick(): (*|*|*|*|*|*|*)}|*}\n */\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n  return {\n    onClick() {\n      let action = ownProps.action;\n\n      switch (action) {\n        case 'showForm':\n          return dispatch(showForm(ownProps.showElement));\n\n        case 'createPost':\n          return dispatch(createPost(ownProps.title, ownProps.text));\n\n        case 'deletePost':\n          return dispatch(deletePost(ownProps.id));\n\n        case 'updatePost':\n          return dispatch(updatePost(ownProps.title, ownProps.text, ownProps.id));\n\n        case 'showUpdateForm':\n          return dispatch(showUpdateForm(ownProps.data));\n\n        case 'showPostDetail':\n          return dispatch(showPostDetail(ownProps.data));\n\n        case 'setPostsFilter':\n          return dispatch(setPostsFilter(ownProps.filter));\n\n        default:\n          return;\n      }\n    }\n\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Button);","map":{"version":3,"sources":["/var/www/reactapps/testing-app-refactoring/src/containers/Buttons/Button.js"],"names":["connect","deletePost","createPost","showForm","showUpdateForm","updatePost","showPostDetail","setPostsFilter","Button","put","takeEvery","FormDataText","mapStateToProps","state","ownProps","classes","result","getButtonText","console","log","showElement","buttonText","formState","form","filter","v","pop","enabled","hideForm","hide","doubleAction","mapDispatchToProps","dispatch","onClick","action","title","text","id","data"],"mappings":"AAAA,SAAQA,OAAR,QAAuB,aAAvB;AACA,SACIC,UADJ,EAEIC,UAFJ,EAGIC,QAHJ,EAIIC,cAJJ,EAKIC,UALJ,EAMIC,cANJ,EAOIC,cAPJ,QAQO,eARP;AASA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,SAAQC,GAAR,EAAaC,SAAb,QAA6B,oBAA7B;AACA,SAAQC,YAAR,QAA4B,SAA5B,C,CACA;;AAEA,SAASC,eAAT,CAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;AACtC,SAAO;AACHC,IAAAA,OAAO,EAAED,QAAQ,CAACC,OADf;AAEHC,IAAAA,MAAM,EAAEC,aAAa,CAACJ,KAAD,EAAQC,QAAR;AAFlB,GAAP;AAIH;AAED;;;;;;;;;;AAQA,SAASG,aAAT,CAAuBJ,KAAvB,EAA8BC,QAA9B,EAAwC;AACpCI,EAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;;AACA,MAAI,CAACC,QAAQ,CAACM,WAAd,EAA2B;AACvB,WAAON,QAAQ,CAACO,UAAhB;AACH;;AACD,MAAIC,SAAS,GAAGT,KAAK,CAACU,IAAN,CAAWC,MAAX,CAAkBC,CAAC,IAAIA,CAAC,CAACL,WAAF,KAAkBN,QAAQ,CAACM,WAAlD,EAA+DM,GAA/D,EAAhB;;AACA,MAAI,CAACJ,SAAL,EAAgB;AACZ,WAAOR,QAAQ,CAACO,UAAhB;AACH;;AACD,SAAOC,SAAS,CAACK,OAAV,GAAoBhB,YAAY,CAACiB,QAAjC,GAA4Cd,QAAQ,CAACO,UAA5D;AACH;;AAED,UAAUQ,IAAV,GAAiB;AACb,QAAMpB,GAAG,CAACN,QAAQ,CAAC,gBAAD,CAAT,CAAT;AACH;;AAED,OAAO,UAAU2B,YAAV,GAAyB;AAC5B,QAAMpB,SAAS,CAAC,aAAD,EAAgBmB,IAAhB,CAAf;AACA,QAAMnB,SAAS,CAAC,aAAD,EAAgBmB,IAAhB,CAAf;AACH;AAED;;;;;;;;;;AASA,SAASE,kBAAT,CAA4BC,QAA5B,EAAsClB,QAAtC,EAAgD;AAE5C,SAAO;AACHmB,IAAAA,OAAO,GAAI;AACP,UAAIC,MAAM,GAAGpB,QAAQ,CAACoB,MAAtB;;AACA,cAAQA,MAAR;AACI,aAAK,UAAL;AACI,iBAAOF,QAAQ,CAAC7B,QAAQ,CAACW,QAAQ,CAACM,WAAV,CAAT,CAAf;;AACJ,aAAK,YAAL;AACI,iBAAOY,QAAQ,CAAC9B,UAAU,CAACY,QAAQ,CAACqB,KAAV,EAAiBrB,QAAQ,CAACsB,IAA1B,CAAX,CAAf;;AACJ,aAAK,YAAL;AACI,iBAAOJ,QAAQ,CAAC/B,UAAU,CAACa,QAAQ,CAACuB,EAAV,CAAX,CAAf;;AACJ,aAAK,YAAL;AACI,iBAAOL,QAAQ,CAAC3B,UAAU,CAACS,QAAQ,CAACqB,KAAV,EAAiBrB,QAAQ,CAACsB,IAA1B,EAAgCtB,QAAQ,CAACuB,EAAzC,CAAX,CAAf;;AACJ,aAAK,gBAAL;AACI,iBAAOL,QAAQ,CAAC5B,cAAc,CAACU,QAAQ,CAACwB,IAAV,CAAf,CAAf;;AACJ,aAAK,gBAAL;AACI,iBAAON,QAAQ,CAAC1B,cAAc,CAACQ,QAAQ,CAACwB,IAAV,CAAf,CAAf;;AACJ,aAAK,gBAAL;AACI,iBAAON,QAAQ,CAACzB,cAAc,CAACO,QAAQ,CAACU,MAAV,CAAf,CAAf;;AACJ;AACI;AAhBR;AAkBH;;AArBE,GAAP;AAuBH;;AAED,eAAexB,OAAO,CAClBY,eADkB,EAElBmB,kBAFkB,CAAP,CAGbvB,MAHa,CAAf","sourcesContent":["import {connect,} from 'react-redux'\nimport {\n    deletePost,\n    createPost,\n    showForm,\n    showUpdateForm,\n    updatePost,\n    showPostDetail,\n    setPostsFilter\n} from '../../actions'\nimport Button from '../../components/Buttons/Button'\nimport {put, takeEvery} from 'redux-saga/effects'\nimport {FormDataText} from  '../Form'\n//import action from '../../index'\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        classes: ownProps.classes,\n        result: getButtonText(state, ownProps),\n    }\n}\n\n/**\n * Set text for \"show/hide form\" button\n * ( if this button have prop 'showElement')\n *\n * @param state\n * @param ownProps\n * @returns {string|*}\n */\nfunction getButtonText(state, ownProps) {\n    console.log(ownProps);\n    console.log(state);\n    if (!ownProps.showElement) {\n        return ownProps.buttonText\n    }\n    let formState = state.form.filter(v => v.showElement === ownProps.showElement).pop();\n    if (!formState) {\n        return ownProps.buttonText\n    }\n    return formState.enabled ? FormDataText.hideForm : ownProps.buttonText\n}\n\nfunction* hide() {\n    yield put(showForm('form-element-1'))\n}\n\nexport function* doubleAction() {\n    yield takeEvery('CREATE_POST', hide);\n    yield takeEvery('UPDATE_POST', hide);\n}\n\n/**\n *\n * mapDispatchToProps\n * adds event to our prop. We can use it from Button component as well.\n *\n * @param dispatch\n * @param ownProps\n * @returns {{onClick(): (*|*|*|*|*|*|*)}|*}\n */\nfunction mapDispatchToProps(dispatch, ownProps) {\n\n    return {\n        onClick () {\n            let action = ownProps.action;\n            switch (action) {\n                case 'showForm':\n                    return dispatch(showForm(ownProps.showElement));\n                case 'createPost':\n                    return dispatch(createPost(ownProps.title, ownProps.text));\n                case 'deletePost':\n                    return dispatch(deletePost(ownProps.id));\n                case 'updatePost':\n                    return dispatch(updatePost(ownProps.title, ownProps.text, ownProps.id));\n                case 'showUpdateForm':\n                    return dispatch(showUpdateForm(ownProps.data));\n                case 'showPostDetail':\n                    return dispatch(showPostDetail(ownProps.data));\n                case 'setPostsFilter':\n                    return dispatch(setPostsFilter(ownProps.filter));\n                default:\n                    return\n            }\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Button)"]},"metadata":{},"sourceType":"module"}